<p class="text-center text-xl md:text-3xl lg:text-3xl xl:text-3xl font-bold text-lime-500 mt-6 pb-4">レビュー一覧</p>

<div class="text-center mt-8 text-sky-800 overflow-x-auto">
    <div class="inline-flex space-x-6">
        <%= form_with url: reviews_path, method: :get, class: "flex flex-nowrap justify-center items-center space-x-4 w-full", local: true do |f| %>
        <div class="flex flex-col mb-4 text-xs md:text-sm lg:text-lg xl:text-lg w-32 md:w-48">
            <%= f.label :address_cont, "都道府県", class: "mb-2" %>
            <%= f.select :address_cont, options_for_select(prefecture_options), { prompt: '選択してください' }, class: "p-2 md:p-3" %>
        </div>
        <div class="flex flex-col mb-4 text-xs md:text-sm lg:text-lg xl:text-lg w-32 md:w-48">
            <%= f.label :activity_type_eq, "活動タイプ", class: "mb-2" %>
            <%= f.select :activity_type_eq, options_for_select(@activity_type_options), { prompt: '選択してください' }, class: "p-2 md:p-3" %>
        </div>
        <div class="flex flex-col mb-4 text-xs md:text-sm lg:text-lg xl:text-lg w-32 md:w-48">
            <%= f.label :keyword, "フリーテキスト", class: "mb-2" %>
            <%= f.text_field :keyword, class: "p-2 md:p-3" %>
        </div>
        <div class="flex items-end mt-2 md:mt-5 pl-2 md:pl-4">
            <%= f.submit "検索", class: "bg-blue-500 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring p-2 md:p-3 text-xs md:text-sm lg:text-lg xl:text-lg" %>
        </div>
        <% end %>
    </div>
</div>

<% if @reviews.any? %>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 mb-6 text-sky-800">
    <div class="grid gap-4" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
      <% @reviews.each do |review| %>
        <div class="shadow-xl rounded-lg bg-white p-4 border border-gray-200">
          <div class="flex flex-col items-center justify-center w-full">
            <div class="flex items-center space-x-2">
              <p class="text-center text-lg md:text-2xl lg:text-2xl xl:text-2xl text-sky-800 mt-4"><%= review.place.name %></p>
            </div>
            <p class="text-center text-lg md:text-2xl lg:text-2xl xl:text-2xl my-1 text-sky-800 mt-4">住所: <%= review.place.address %></p>
            <% if review.place.photo_url %>
              <img src="<%= review.place.photo_url %>" alt="<%= review.place.name %>" class="mx-auto w-80 h-80 my-1 mt-6">
            <% end %>
          </div>
          <div class="text-left flex items-center mt-4">
            <% if review.user.avatar.present? %>
              <%= image_tag review.user.avatar.url, alt: review.user.name, class: 'w-10 h-10 rounded-full mr-2' %>
            <% else %>
              <%= image_tag 'avatar.png', alt: review.user.name, class: 'w-10 h-10 rounded-full mr-2' %>
            <% end %>
            <strong><%= review.user.name %></strong>
          </div>
          <p class="mt-4 text-lg flex items-center">
            評価:
            <span class="flex ml-2">
              <% 5.times do |i| %>
                <% if i < review.rating %>
                  <span class="text-yellow-400 text-2xl">&#9733;</span>
                <% else %>
                  <span class="text-gray-300 text-2xl">&#9733;</span>
                <% end %>
              <% end %>
            </span>
          </p>
          <div class="flex justify-center w-full mt-2">
            <%= link_to 'レビューページへ', place_review_path(review.place, review), class: "w-40 flex items-center justify-center py-2 bg-blue-500 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring mt-4" %>
          </div>
          <% if review.user == current_user %>
            <div class="flex justify-center space-x-6 mt-4 mb-4 text-center">
              <%= link_to '編集', edit_place_review_path(review.place, review), class: 'bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600' %>
              <%= link_to '削除', place_review_path(review.place, review), data: { turbo_method: :delete, turbo_confirm: '本当に削除しますか？' }, class: 'bg-rose-500 text-white px-4 py-2 rounded hover:bg-rose-600' %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
  <%= render 'shared/pagination', collection: @reviews %>
<% else %>
  <p class="text-center text-gray-500">
<% end %>